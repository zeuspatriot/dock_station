<template name="workitems">
    <div class="container">
        <div class="row">
            <div class="col-md-4" id="settings">
                <!--<div class="form-group">-->
                    <!--<label for="campaignId">New Campaign ticket ID</label>-->
                    <!---->
                <!--</div>-->
                <div class="form-group">
                    <label for="campaignId">New Campaign ticket ID</label>
                    <div class="input-group">
                        <input type="text" id="campaignId" required class="form-control" value="{{test.testId}}">
                    <span class="input-group-btn">
                        <button class="btn btn-primary" id="setNewCampId">Set ID</button>
                    </span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="devNameBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            <span id="text">{{#if test.dev}}{{test.dev.name}}{{else}}Developer name{{/if}}</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            {{#each developers}}
                                <li class="devName"><a href="#">{{name}}</a></li>
                            {{/each}}
                        </ul>
                    </div>
                    <input type="text" id="devName" class="form-control hidden">
                </div>
                <div class="form-group">
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="qcNameBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            <span id="text">{{#if test.qc}}{{test.qc.name}}{{else}}Qc name{{/if}}</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            {{#each qcs}}
                                <li class="qcName"><a href="#">{{name}}</a></li>
                            {{/each}}
                        </ul>
                    </div>
                    <input type="text" id="qcName" class="form-control hidden">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-7">
                <form id="items">
                    <table class="table table-striped" id="workitemsTable">
                        <thead>
                            <tr>
                                <th>Item name</th>
                                <th>Dev est</th>
                                <th>Qc est</th>
                                <th>Group</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each currentWorkitems}}
                                <tr>
                                    <td>
                                        <input type="text" required id="workitemName" name="name" class="form-control" title="Workitme Name" value="{{name}}">
                                    </td>
                                    <td>
                                        <input type="number" required step="0.1" id="devEst" name="devEst" class="form-control" title="Dev estimate" value="{{devEst}}">
                                    </td>
                                    <td>
                                        <input type="number" required step="0.1" id="qcEst" name="qcEst" class="form-control" title="Qc estimate" value="{{qcEst}}">
                                    </td>
                                    <td>
                                        <input type="number" required step="1" id="group" name="group" class="form-control" title="Group id" value="{{group}}">
                                    </td>
                                    <td>
                                        <a href="#" class="remove"><span class="glyphicon glyphicon-remove"></span></a>
                                    </td>
                                </tr>
                            {{/each}}
                            {{#unless currentWorkitems}}
                                <tr id="initial">
                                    <td>
                                        <input type="text" required id="workitemName" name="name" class="form-control" title="Workitme Name">
                                    </td>
                                    <td>
                                        <input type="number" required step="0.1" id="devEst" name="devEst" class="form-control" title="Dev estimate">
                                    </td>
                                    <td>
                                        <input type="number" required step="0.1" id="qcEst" name="qcEst" class="form-control" title="Qc estimate">
                                    </td>
                                    <td>
                                        <input type="number" required step="1" id="group" name="group" class="form-control" title="Group id">
                                    </td>
                                    <td>
                                        <a href="#" class="remove"><span class="glyphicon glyphicon-remove"></span></a>
                                    </td>
                                </tr>
                            {{/unless}}
                        </tbody>
                    </table>
                </form>
                <div class="form-group">

                    <button class="btn btn-primary" id="addNewItem" >Add another item</button>
                </div>

                <div class="form-group">
                    <div class="input-group">
                    <span class="input-group-btn">
                        <button class="btn btn-primary" id="generate">Generate</button>
                    </span>
                        <input type="text" id="submitComment" class="form-control" placeholder="Optional comment">
                    </div>
                </div>
            </div>
            <div class="col-md-5">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Group</th>
                            <th>Name</th>
                            <th>Dev H</th>
                            <th>Qc H</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each groupedLastWorkItems}}
                            <tr>
                                <td>
                                    {{group}}
                                </td>
                                <td>
                                    {{value.name}}
                                </td>
                                <td>
                                    {{value.devEst}}
                                </td>
                                <td>
                                    {{value.qcEst}}
                                </td>
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
                <button class="btn btn-success" id="createWorkItems">Post to YouTrack</button>
            </div>
        </div>
    </div>
</template>
